{
  "db_name": "PostgreSQL",
  "query": "\n        WITH ranked_sets AS (\n            SELECT\n                s.exercise_id,\n                s.profile_id,\n                s.reps,\n                s.weight,\n                s.weight_unit,\n                s.side,\n                s.created_at,\n                w.end_time,\n                ROW_NUMBER() OVER (\n                    PARTITION BY s.exercise_id, COALESCE(s.profile_id, '00000000-0000-0000-0000-000000000000')\n                    ORDER BY w.end_time DESC, s.created_at ASC\n                ) as rn,\n                DENSE_RANK() OVER (\n                    PARTITION BY s.exercise_id, COALESCE(s.profile_id, '00000000-0000-0000-0000-000000000000')\n                    ORDER BY w.end_time DESC\n                ) as workout_rank\n            FROM user_sets s\n            JOIN workouts w ON s.workout_id = w.id\n            WHERE s.user_id = $1\n        )\n        SELECT\n            exercise_id,\n            profile_id,\n            reps,\n            weight,\n            weight_unit,\n            side\n        FROM ranked_sets\n        WHERE workout_rank = 1\n        ORDER BY exercise_id, profile_id, created_at ASC\n        ",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "exercise_id",
        "type_info": "Uuid"
      },
      {
        "ordinal": 1,
        "name": "profile_id",
        "type_info": "Uuid"
      },
      {
        "ordinal": 2,
        "name": "reps",
        "type_info": "Int4"
      },
      {
        "ordinal": 3,
        "name": "weight",
        "type_info": "Numeric"
      },
      {
        "ordinal": 4,
        "name": "weight_unit",
        "type_info": "Varchar"
      },
      {
        "ordinal": 5,
        "name": "side",
        "type_info": "Varchar"
      }
    ],
    "parameters": {
      "Left": [
        "Uuid"
      ]
    },
    "nullable": [
      false,
      true,
      false,
      false,
      false,
      true
    ]
  },
  "hash": "d49cd90946b0f1d3bd3f7b3ce118e6a37d495a6e25ec7b61301cf4a8efc17bc7"
}
